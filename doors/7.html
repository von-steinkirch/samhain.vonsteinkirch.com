<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>door 7 of the spell - redemption</title>
    <link rel="icon" type="image/svg+xml" href="../assets/favicon.svg">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="door-4">
    <!-- Black and White Top Section -->
    <div class="door-page black-white-section">
        <div class="door-content">
            <h1 class="door-title">üö™ door 7 of the spell üö™<br>
                "memento mori"
            </h1>

            <br>
            
            <div class="door-text">
                <div class="video-container" style="display: flex; justify-content: center; gap: 15px; margin: 40px 0; flex-wrap: wrap;">
                    <iframe width="400" height="250" src="https://www.youtube.com/embed/sOnqjkJTMaA?modestbranding=1&showinfo=0&rel=0&controls=1&disablekb=1&fs=1&iv_load_policy=3&cc_load_policy=0" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen
                        style="max-width: 100%; border-radius: 15px; border: 3px solid #ff8c00; box-shadow: 0 0 20px rgba(255, 140, 0, 0.4);">
                    </iframe>
                    
                    <iframe width="400" height="250" src="https://www.youtube.com/embed/pjq-PmryUmA?modestbranding=1&showinfo=0&rel=0&controls=1&disablekb=1&fs=1&iv_load_policy=3&cc_load_policy=0" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen
                        style="max-width: 100%; border-radius: 15px; border: 3px solid #ff8c00; box-shadow: 0 0 20px rgba(255, 140, 0, 0.4);">
                    </iframe>

                    <iframe width="400" height="250" src="https://www.youtube.com/embed/iIyrLRixMs8?modestbranding=1&showinfo=0&rel=0&controls=1&disablekb=1&fs=1&iv_load_policy=3&cc_load_policy=0" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                    allowfullscreen
                    style="max-width: 100%; border-radius: 15px; border: 3px solid #ff8c00; box-shadow: 0 0 20px rgba(255, 140, 0, 0.4);">
                </iframe>
                </div>

                <div class="text-frame">
                    <div class="trivia-container">
                        <h3 class="trivia-title">the specterly american quiz</h3>
                        <p class="trivia-subtitle">test your knowledge about life, death, and the beautiful cycle of existence</p>
                        
                        <div class="trivia-game" id="triviaGame">
                            <div class="question-container" id="questionContainer">
                                <div class="question-number" id="questionNumber">question 1 of 7</div>
                                <div class="question-text" id="questionText"></div>
                                <div class="answers-container" id="answersContainer"></div>
                            </div>
                            
                            <div class="trivia-results" id="triviaResults" style="display: none;">
                                <div class="score-display" id="scoreDisplay"></div>
                                <div class="celebration" id="celebration"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Back Button Section -->
    <div class="door-page back-section">
        <div class="door-content">
            <a href="../index.html" class="back-button">‚Üê back to the countdown</a>
        </div>
    </div>

    <script>
        // Trivia questions with memento mori theme
        const triviaQuestions = [
        {
                question: "halloween was originally known as what in the united states?",
                answers: [
                    "all hallows' eve",
                    "all souls' night",
                    "samhain",
                    "harvest festival"
                ],
                correct: 0,
                explanation: "all hallows' eve was the original name for halloween, referring to the evening before all saints' day."
            },
            {
                question: "what does 'memento mori' mean in latin?",
                answers: [
                    "remember death",
                    "remember zombies",
                    "ghosts are cool",
                    "vampires must die"
                ],
                correct: 0,
                explanation: "memento mori literally means 'remember that you must die' - a reminder of mortality to inspire living fully."
            },
            {
                question: "many american towns hold 'haunted house' attractions during october. the first professional haunted house in the USA was opened in which decade?",
                answers: [
                    "late 1800s",
                    "1930s",
                    "1960s",
                    "1980s"
                ],
                correct: 1,
                explanation: "the first professional haunted house opened in the 1930s, during the great depression, as entertainment."
            },
            {
                question: "what is the traditional symbol of mortality in art?",
                answers: [
                    "hourglass",
                    "skull",
                    "wilted flower",
                    "all of the above"
                ],
                correct: 3,
                explanation: "all of these symbols represent mortality - hourglass (time), skull (death), and wilted flower (decay)."
            },
            {
                question: "which american singer released the song somebody's watching me, which has become a halloween favorite due to its creepy lyrics??",
                answers: [
                    "michael jackson",
                    "bobby pickett",
                    "rockwell",
                    "ray parker jr."
                ],
                correct: 2,
                explanation: "rockwell released 'somebody's watching me' in 1984, featuring michael jackson on backing vocals. the song became a halloween classic due to its paranoid lyrics about being watched."
            },
            {
                question: "thriller was co-written by which famous music producer?",
                answers: [
                    "quincy jones",
                    "phil spector",
                    "rick rubin",
                    "george martin"
                ],
                correct: 0,
                explanation: "quincy jones co-wrote and produced michael jackson's thriller album, which became the best-selling album of all time and featured the iconic halloween-themed title track."
            },
            {
                question: "who is going to win my heart and become my infinite lover?",
                answers: [
                    "the bro",
                    "the other bro",
                    "the other other bro",
                    "i dunno man, i am getting a lil confused here..."
                ],
                correct: 2,
                explanation: "well, let's see who is brave enough to get a date with me... we don't want to live in the interwebs forever, do we?"
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let selectedAnswer = null;

        // Custom floating skulls for door 7 (memento mori theme)
        document.addEventListener('DOMContentLoaded', function() {
            createFloatingSkulls();
            initializeTrivia();
        });

        function createFloatingSkulls() {
            const skullCount = 12;
            
            for (let i = 0; i < skullCount; i++) {
                const skull = document.createElement('div');
                skull.className = 'floating-skull';
                skull.innerHTML = 'üíÄ';
                skull.style.left = `${Math.random() * 100}vw`;
                skull.style.top = `${Math.random() * 100}vh`;
                skull.style.animationDuration = `${8 + Math.random() * 12}s`;
                skull.style.animationDelay = `${Math.random() * 5}s`;
                skull.style.opacity = `${0.2 + Math.random() * 0.3}`;
                skull.style.fontSize = `${8 + Math.random() * 4}px`;
                document.body.appendChild(skull);
            }
        }

        function changeSkullsToHearts() {
            const skulls = document.querySelectorAll('.floating-skull');
            skulls.forEach(skull => {
                skull.innerHTML = 'üíñ';
                // Add a subtle animation to the hearts
                skull.style.animation = 'floatUp 4s ease-in-out infinite alternate';
            });
        }

        function initializeTrivia() {
            currentQuestion = 0;
            score = 0;
            showQuestion();
            
            // Add restart button functionality
            document.getElementById('restartBtn').addEventListener('click', function() {
                document.getElementById('triviaResults').style.display = 'none';
                document.getElementById('questionContainer').style.display = 'block';
                initializeTrivia();
            });
        }

        function showQuestion() {
            const question = triviaQuestions[currentQuestion];
            const questionNumber = document.getElementById('questionNumber');
            const questionText = document.getElementById('questionText');
            const answersContainer = document.getElementById('answersContainer');

            questionNumber.textContent = `Question ${currentQuestion + 1} of 7`;
            questionText.textContent = question.question;
            
            // Clear previous content including explanations
            answersContainer.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const answerButton = document.createElement('button');
                answerButton.className = 'answer-btn';
                answerButton.textContent = answer;
                answerButton.addEventListener('click', () => selectAnswer(index));
                answersContainer.appendChild(answerButton);
            });
        }

        function selectAnswer(answerIndex) {
            selectedAnswer = answerIndex;
            const answerButtons = document.querySelectorAll('.answer-btn');
            const question = triviaQuestions[currentQuestion];
            const isLastQuestion = currentQuestion === 6;
            
            // Remove previous selections and feedback
            answerButtons.forEach(btn => {
                btn.classList.remove('selected', 'correct', 'incorrect');
                btn.disabled = false;
            });
            
            // Disable all buttons to prevent multiple selections
            answerButtons.forEach(btn => btn.disabled = true);
            
            // Show immediate feedback
            if (isLastQuestion) {
                // Last question: ALL ANSWERS ARE CORRECT
                answerButtons.forEach((btn, index) => {
                    btn.classList.add('correct');
                });
            } else {
                // Other questions: normal logic with one correct answer
                answerButtons.forEach((btn, index) => {
                    if (index === question.correct) {
                        btn.classList.add('correct');
                    } else if (index === answerIndex && index !== question.correct) {
                        btn.classList.add('incorrect');
                    }
                });
            }
            
            // Highlight selected answer
            answerButtons[answerIndex].classList.add('selected');
            
            // Show explanation
            showAnswerExplanation(question, answerIndex);
            
            // Show next button instead of submit
            const nextBtn = document.createElement('button');
            nextBtn.className = 'submit-btn';
            nextBtn.textContent = currentQuestion === triviaQuestions.length - 1 ? 'See Results' : 'Next Question';
            nextBtn.addEventListener('click', checkAnswer);
            
            const answersContainer = document.getElementById('answersContainer');
            if (!document.querySelector('.submit-btn')) {
                answersContainer.appendChild(nextBtn);
            }
        }

        function showAnswerExplanation(question, selectedIndex) {
            // Remove any existing explanation
            const existingExplanation = document.querySelector('.answer-explanation');
            if (existingExplanation) {
                existingExplanation.remove();
            }
            
            // Create explanation element
            const explanation = document.createElement('div');
            explanation.className = 'answer-explanation';
            
            const isCorrect = selectedIndex === question.correct;
            const isLastQuestion = currentQuestion === 6;
            
            if (isLastQuestion) {
                // Special handling for the last question
                explanation.innerHTML = `
                    <div class="explanation-content">
                        <p class="explanation-text">üí• boom! üí•</p>
                        <p class="explanation-text">this question was a trick! time for the big finale!</p>
                    </div>
                `;
            } else if (isCorrect) {
                explanation.innerHTML = `
                    <div class="explanation-content correct-explanation">
                        <p class="explanation-text">‚úÖ correct!</p>
                        <p class="explanation-text">${question.explanation}</p>
                    </div>
                `;
            } else {
                explanation.innerHTML = `
                    <div class="explanation-content incorrect-explanation">
                        <p class="explanation-text">‚ùå not quite right.</p>
                        <p class="explanation-text">${question.explanation}</p>
                    </div>
                `;
            }
            
            // Add explanation to the answers container
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.appendChild(explanation);
        }

        function checkAnswer() {
            const question = triviaQuestions[currentQuestion];
            const isLastQuestion = currentQuestion === 6;
            
            // Update score
            if (isLastQuestion) {
                // Last question is always wrong, create explosion effect
                createExplosionEffect();
                createFloatingEmoji('üí•', 3);
            } else if (selectedAnswer === question.correct) {
                score++;
                createFloatingEmoji('‚ú®');
            } else {
                createFloatingEmoji('üíÄ');
            }
            
            // Move to next question after delay
            setTimeout(() => {
                if (isLastQuestion) {
                    // For the last question, go directly to results after explosion
                    showResults();
                } else {
                    currentQuestion++;
                    if (currentQuestion < triviaQuestions.length) {
                        showQuestion();
                    } else {
                        showResults();
                    }
                }
            }, isLastQuestion ? 3000 : 2000); // Longer delay for explosion effect
        }

        function showResults() {
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('triviaResults').style.display = 'block';
            
            const scoreDisplay = document.getElementById('scoreDisplay');
            const celebration = document.getElementById('celebration');
            
            const percentage = Math.round((score / triviaQuestions.length) * 100);
            
            scoreDisplay.innerHTML = `
                <h3>üéâ Trivia Complete! üéâ</h3>
                <p>You scored ${score} out of ${triviaQuestions.length} (${percentage}%)</p>
            `;
            
            // Celebration message based on score
            if (percentage >= 85) {
                celebration.innerHTML = 'üåü Excellent! You truly understand the beauty of memento mori! üåü';
                createFloatingEmoji('üåü', 5);
            } else if (percentage >= 70) {
                celebration.innerHTML = '‚ú® Great job! You have a good grasp of life\'s precious nature! ‚ú®';
                createFloatingEmoji('‚ú®', 3);
            } else if (percentage >= 50) {
                celebration.innerHTML = 'üí´ Not bad! Remember, every moment is a chance to learn! üí´';
                createFloatingEmoji('üí´', 2);
            } else {
                celebration.innerHTML = 'üå± Keep learning! The journey of understanding mortality is beautiful! üå±';
                createFloatingEmoji('üå±', 2);
            }
            
            // Add pink effect to the page after quiz completion
            setTimeout(() => {
                document.body.classList.add('quiz-complete-pink');
                // Change skulls to hearts when page turns pink
                changeSkullsToHearts();
            }, 300);
        }

        function createExplosionEffect() {
            // Create explosion overlay
            const explosionOverlay = document.createElement('div');
            explosionOverlay.style.position = 'fixed';
            explosionOverlay.style.top = '0';
            explosionOverlay.style.left = '0';
            explosionOverlay.style.width = '100vw';
            explosionOverlay.style.height = '100vh';
            explosionOverlay.style.background = 'radial-gradient(circle, #ff0000 0%, #ff4500 30%, #ff8c00 60%, #000000 100%)';
            explosionOverlay.style.zIndex = '9999';
            explosionOverlay.style.opacity = '0';
            explosionOverlay.style.transition = 'opacity 0.1s ease-out';
            explosionOverlay.style.pointerEvents = 'none';
            
            document.body.appendChild(explosionOverlay);
            
            // Create explosion particles
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.innerHTML = ['üí•', 'üî•', '‚ö°', 'üí¢'][Math.floor(Math.random() * 4)];
                particle.style.position = 'fixed';
                particle.style.left = `${Math.random() * 100}vw`;
                particle.style.top = `${Math.random() * 100}vh`;
                particle.style.fontSize = `${20 + Math.random() * 30}px`;
                particle.style.zIndex = '10000';
                particle.style.pointerEvents = 'none';
                particle.style.animation = `explosionParticle 1s ease-out forwards`;
                particle.style.animationDelay = `${Math.random() * 0.5}s`;
                document.body.appendChild(particle);
                
                // Remove particle after animation
                setTimeout(() => {
                    if (document.body.contains(particle)) {
                        document.body.removeChild(particle);
                    }
                }, 1500);
            }
            
            // Trigger explosion
            setTimeout(() => {
                explosionOverlay.style.opacity = '1';
            }, 50);
            
            // Remove explosion overlay
            setTimeout(() => {
                explosionOverlay.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(explosionOverlay)) {
                        document.body.removeChild(explosionOverlay);
                    }
                }, 100);
            }, 800);
        }

        function createFloatingEmoji(emoji, count = 1) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const floatingEmoji = document.createElement('div');
                    floatingEmoji.innerHTML = emoji;
                    floatingEmoji.style.position = 'fixed';
                    floatingEmoji.style.left = `${Math.random() * 100}vw`;
                    floatingEmoji.style.top = '50vh';
                    floatingEmoji.style.fontSize = '2rem';
                    floatingEmoji.style.pointerEvents = 'none';
                    floatingEmoji.style.zIndex = '1000';
                    floatingEmoji.style.animation = 'floatUp 3s ease-out forwards';
                    document.body.appendChild(floatingEmoji);
                    
                    setTimeout(() => {
                        document.body.removeChild(floatingEmoji);
                    }, 3000);
                }, i * 200);
            }
        }

    </script>
</body>
</html>
